#install nodejs
sudo apt-get install nodejs

#clone odas web repository
cd ~/
git clone https://github.com/introlab/odas_web.git
cd odas_web

#insall and update python2 and nodejs
sudo apt update
sudo apt install python2
npm config set python /usr/bin/python2
curl -fsSL https://deb.nodesource.com/setup_12.x | sudo -E bash -
sudo apt install nodejs -y

# Trying to fix npm and nodejs install 
sudo npm uninstall
sudo apt install -y npm build-essential python3 python3-dev libssl-dev libffi-dev
rm -rf node_modules package-lock.json
npm cache clean --force
npm rebuild grpc --target=5.0.13 --arch=arm64 --build-from-source 
rm -rf node_modules package-lock.json
npm cache clean --force
npm uninstall grpc
npm audit fix --force
npm install @grpc/grpc-js


#check versions should be 12.x and 7.x
node -v
npm -v

#reinstalling npm modules
npm install

#start web site
npm start

#debug steps
npm rebuild
npx electron-rebuild
